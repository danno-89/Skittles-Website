import"./modulepreload-polyfill-B5Qt9EMX.js";import{e as A,c as N,b as M,g as W,d as D}from"./firebase.config-IpTQKhZm.js";/* empty css                          */import"./main-CA5my9sR.js";import"https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";const l=document.getElementById("hall-of-fame-container"),g=document.querySelectorAll(".main-tabs .tab-link"),w=document.getElementById("competition-tabs-container"),m=document.getElementById("stats-content"),f=document.getElementById("detailed-winners-container"),E=document.getElementById("division-filter-container"),C=document.getElementById("division-filter");let T=[],p=[],v=new Set;const x="Highest Individual Average",L=["premier-division","first-division","second-division","third-division"],$=async()=>{try{const o=await A(N(M,"competitions"));if(o.empty){l.innerHTML="<p>No competition data found.</p>";return}T=o.docs.map(i=>({id:i.id,...i.data()})),g.forEach(i=>i.addEventListener("click",()=>H(i.dataset.type))),C.addEventListener("change",()=>{var n;((n=document.querySelector(".sub-tabs .tab-link.active"))==null?void 0:n.dataset.competitionId)===x&&y(p,"Highest Individual Average",C.value)}),g.length>0&&H(g[0].dataset.type)}catch(o){console.error("Error initializing page:",o),l.innerHTML="<p>Error loading competition data.</p>"}},H=o=>{g.forEach(i=>i.classList.toggle("active",i.dataset.type===o)),B(o)},B=o=>{w.innerHTML="";const i=T.filter(n=>n.type===o).sort((n,t)=>n.name.localeCompare(t.name));if(i.length===0){l.innerHTML="<p>No competitions of this type.</p>",m.innerHTML="",f.innerHTML="",E.style.display="none";return}i.forEach(n=>{const t=document.createElement("button");t.className="tab-link",t.dataset.competitionId=n.id,t.textContent=n.name,t.addEventListener("click",()=>b(n.id)),w.appendChild(t)}),i.length>0&&b(i[0].id)},b=o=>{w.querySelectorAll(".tab-link").forEach(i=>{i.classList.toggle("active",i.dataset.competitionId===o)}),_(o)},_=async o=>{if(l.innerHTML="<p>Loading...</p>",m.innerHTML="<p>Loading statistics...</p>",f.innerHTML="",E.style.display="none",!o){l.innerHTML="",m.innerHTML="<p>Select a competition to see statistics.</p>";return}try{const i=await W(D(M,"winners",o));if(i.exists()){const e=i.data();L.includes(o)?p=Object.entries(e).map(([s,r])=>{var c,d,h;return{season:s,winner:((c=r.places)==null?void 0:c.first)||r.winner||"",runner_up:((d=r.places)==null?void 0:d.second)||r.runner_up||"",third_place:((h=r.places)==null?void 0:h.third)||r.third_place||""}}):p=Object.values(e).find(Array.isArray)||[]}else p=[];p.sort((e,s)=>String(s.season).localeCompare(String(e.season)));const n=T.find(e=>e.id===o),t=n?n.name:"Competition";if(L.includes(o))k(p,t),m.innerHTML="<p>Statistics are not applicable for this view.</p>";else if(o===x)v=new Set(p.map(e=>e.division).filter(Boolean)),O(v),E.style.display="flex",y(p,t,"all"),m.innerHTML="<p>Statistics are not applicable for this view.</p>";else{R(p,t);const e=q(p);j(e,n.type),z(e)}}catch(i){console.error(`Error loading winners for ${o}:`,i),l.innerHTML="<p>Error loading winners data.</p>",m.innerHTML="<p>Error generating statistics.</p>"}},k=(o,i)=>{l.innerHTML="";const n=document.createElement("h2");n.className="competition-heading",n.textContent=i,l.appendChild(n);const t=document.createElement("table");t.className="division-standings-table";const s=t.createTHead().insertRow();s.innerHTML="<th>Season</th><th>Winner</th><th>Runner Up</th><th>Third Place</th>";const r=t.createTBody();o.forEach(c=>{const d=r.insertRow();d.insertCell().textContent=c.season||"",d.insertCell().textContent=c.winner||"",d.insertCell().textContent=c.runner_up||"",d.insertCell().textContent=c.third_place||""}),l.appendChild(t)},O=o=>{C.innerHTML='<option value="all">All Divisions</option>';const i=["Premier Division","First Division","Second Division","Third Division","Fourth Division","Ladies"];[...o].sort((t,e)=>{const s=i.indexOf(t),r=i.indexOf(e);return s>-1&&r>-1?s-r:s>-1?-1:r>-1?1:t.localeCompare(e)}).forEach(t=>{const e=document.createElement("option");e.value=t,e.textContent=t,C.appendChild(e)})},y=(o,i,n="all")=>{l.innerHTML="";const t=document.createElement("h2");t.className="competition-heading",t.textContent=i,l.appendChild(t);const e=n==="all"?o:o.filter(a=>a.division===n),s={};new Set(e.map(a=>a.division).filter(Boolean)),e.forEach(a=>{s[a.season]||(s[a.season]={}),s[a.season][a.division]=a.winner});const r=n==="all"?Array.from(v):[n],c=document.createElement("table");c.className="division-winner-table";const h=c.createTHead().insertRow();h.innerHTML="<th>Season</th>",r.forEach(a=>h.innerHTML+=`<th>${a}</th>`);const S=c.createTBody();Object.keys(s).sort((a,u)=>u.localeCompare(a)).forEach(a=>{const u=S.insertRow();u.insertCell().textContent=a,r.forEach(I=>{u.insertCell().textContent=s[a][I]||""})}),l.appendChild(c)},R=(o,i)=>{l.innerHTML="";const n=document.createElement("h2");n.className="competition-heading",n.textContent=i,l.appendChild(n);const t=document.createElement("ul");t.className="winners-list",o.forEach(e=>{let s;typeof e.winner=="object"&&e.winner!==null?e.winner.male&&e.winner.female?s=`${e.winner.female} & ${e.winner.male}`:e.winner.player1&&e.winner.player2?s=`${e.winner.player1} & ${e.winner.player2}`:s="N/A":s=e.winner||"N/A";const r=document.createElement("li");r.innerHTML=`<span class="season">${e.season}</span><span class="winner">${s}</span>`,t.appendChild(r)}),l.appendChild(t)},j=(o,i)=>{if(o.size===0){m.innerHTML="<p>No winners to calculate stats for.</p>";return}const n=[...o.entries()].sort((s,r)=>r[1]-s[1]),t=n.length>0?n[0][1]:0,e=n.filter(s=>s[1]===t);m.innerHTML=`
        <div class="stat-item"><strong>Total Unique Winners:</strong><span>${o.size}</span></div>
        <div class="stat-item"><strong>Most Wins:</strong><span>${e.map(s=>`${s[0]} (${s[1]})`).join(", ")}</span></div>`},z=o=>{if(f.innerHTML="",o.size===0)return;const i=document.createElement("h2");i.textContent="All Winners by Wins",f.appendChild(i);const n=[...o.entries()].reduce((t,[e,s])=>((t[s]=t[s]||[]).push(e),t),{});Object.keys(n).sort((t,e)=>e-t).forEach(t=>{const e=document.createElement("div");e.className="winner-group";const s=document.createElement("h3");s.textContent=`${t} ${t>1?"Wins":"Win"}`,e.appendChild(s);const r=document.createElement("ul");r.className="detailed-winner-list",n[t].sort().forEach(c=>{const d=document.createElement("li");d.textContent=c,r.appendChild(d)}),e.appendChild(r),f.appendChild(e)})};function q(o){return o.reduce((i,n)=>{const t=e=>{e&&typeof e=="string"&&i.set(e,(i.get(e)||0)+1)};return typeof n.winner=="string"&&n.winner?t(n.winner):typeof n.winner=="object"&&n.winner!==null&&(n.winner.male&&t(n.winner.male),n.winner.female&&t(n.winner.female),n.winner.player1&&t(n.winner.player1),n.winner.player2&&t(n.winner.player2)),i},new Map)}document.addEventListener("DOMContentLoaded",$);
