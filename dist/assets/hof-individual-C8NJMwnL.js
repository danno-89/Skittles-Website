import"./modulepreload-polyfill-B5Qt9EMX.js";import{b as D,e as N,c as $,g as A,d as B}from"./firebase.config-IpTQKhZm.js";/* empty css                          *//* empty css                  *//* empty css             */import"./main-CA5my9sR.js";import{collection as W,getDocs as k}from"https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";const u=document.getElementById("countdown"),g=document.getElementById("countdown-card");let E=null;const O=e=>{const t=e.getDate(),i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()],n=e.getFullYear();return`${t} ${i} ${n}`},R=e=>e.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});async function q(e){if(!e)return{nextCompetition:null,nextCompetitionDate:null};const t=W(D,"events"),o=await k(t);let i=null,n=null;const s=new Date;return o.forEach(r=>{if(r.id.includes(e.toLowerCase())&&r.id.includes("individual")){const a=r.data();let c;a.date&&typeof a.date.toDate=="function"?c=a.date.toDate():a.date&&(c=new Date(a.date)),c&&c>s&&(!n||c<n)&&(n=c,i=a)}}),{nextCompetition:i,nextCompetitionDate:n}}function z(e,t){E&&clearInterval(E);const o=g.querySelector("h3");o&&o.remove();const i=g.querySelector(".competition-date-time");if(i&&i.remove(),!t||!e){u&&(u.innerHTML="<p>No upcoming competition scheduled.</p>");return}const n=document.createElement("h3");n.textContent=e.name,g.insertBefore(n,u);const s=document.createElement("p");s.className="competition-date-time",s.textContent=`${O(t)} at ${R(t)}`,g.insertBefore(s,u),E=setInterval(()=>{const r=new Date().getTime(),a=t-r;if(a<0){clearInterval(E),u.innerHTML="<p>The competition has started!</p>";return}const c=Math.floor(a/(1e3*60*60*24)),h=Math.floor(a%(1e3*60*60*24)/(1e3*60*60)),v=Math.floor(a%(1e3*60*60)/(1e3*60)),T=Math.floor(a%(1e3*60)/1e3);u.innerHTML=`
            <div>${c}<span>Days</span></div>
            <div>${h}<span>Hours</span></div>
            <div>${v}<span>Minutes</span></div>
            <div>${T}<span>Seconds</span></div>
        `},1e3)}async function F(e){const{nextCompetition:t,nextCompetitionDate:o}=await q(e);z(t,o)}const l=document.getElementById("hall-of-fame-container"),L=document.getElementById("competition-tabs-container"),p=document.getElementById("stats-content"),f=document.getElementById("detailed-winners-container"),y=document.getElementById("division-filter-container"),w=document.getElementById("division-filter");let H=[],m=[],M=new Set;const x="Highest Individual Average",_=["Ladies' Individual Knockout","Men's Individual Knockout"],j=async()=>{try{const e=await N($(D,"competitions"));if(e.empty){l.innerHTML="<p>No competition data found.</p>";return}H=e.docs.map(t=>({id:t.id,...t.data()})),w.addEventListener("change",()=>{var o;((o=document.querySelector(".main-tabs .tab-link.active"))==null?void 0:o.dataset.competitionId)===x&&I(m,"Highest Individual Average",w.value)}),U()}catch(e){console.error("Error initializing page:",e),l.innerHTML="<p>Error loading competition data.</p>"}},U=()=>{L.innerHTML="";const e=H.filter(t=>_.includes(t.name)).sort((t,o)=>t.name.localeCompare(o.name));if(e.length===0){l.innerHTML="<p>No individual competitions found.</p>",p.innerHTML="",f.innerHTML="",y.style.display="none";return}e.forEach(t=>{const o=document.createElement("button");o.className="tab-link",o.dataset.competitionId=t.id,o.textContent=t.name,o.addEventListener("click",()=>b(t.id,t.name)),L.appendChild(o)}),e.length>0&&b(e[0].id,e[0].name)},b=(e,t)=>{L.querySelectorAll(".tab-link").forEach(i=>{i.classList.toggle("active",i.dataset.competitionId===e)});let o="";t.toLowerCase().includes("men")?o="men":t.toLowerCase().includes("ladies")&&(o="ladies"),F(o),J(e)},J=async e=>{if(l.innerHTML="<p>Loading...</p>",p.innerHTML="<p>Loading statistics...</p>",f.innerHTML="",y.style.display="none",!e){l.innerHTML="",p.innerHTML="<p>Select a competition to see statistics.</p>";return}try{const t=await A(B(D,"winners",e));m=t.exists()?Object.values(t.data()).find(Array.isArray)||[]:[],m.sort((n,s)=>String(s.season).localeCompare(String(n.season)));const o=H.find(n=>n.id===e),i=o?o.name:"Competition";if(e===x)M=new Set(m.map(n=>n.division).filter(Boolean)),G(M),y.style.display="flex",I(m,i,"all"),p.innerHTML="<p>Statistics are not applicable for this view.</p>";else{K(m,i);const n=Q(m);P(n),Y(n)}}catch(t){console.error(`Error loading winners for ${e}:`,t),l.innerHTML="<p>Error loading winners data.</p>",p.innerHTML="<p>Error generating statistics.</p>"}},G=e=>{w.innerHTML='<option value="all">All Divisions</option>';const t=["Premier Division","First Division","Second Division","Third Division","Fourth Division","Ladies"];[...e].sort((i,n)=>{const s=t.indexOf(i),r=t.indexOf(n);return s>-1&&r>-1?s-r:s>-1?-1:r>-1?1:i.localeCompare(n)}).forEach(i=>{const n=document.createElement("option");n.value=i,n.textContent=i,w.appendChild(n)})},I=(e,t,o="all")=>{l.innerHTML="";const i=document.createElement("h2");i.className="competition-heading",i.textContent=t,l.appendChild(i);const n=o==="all"?e:e.filter(d=>d.division===o),s={};new Set(n.map(d=>d.division).filter(Boolean)),n.forEach(d=>{s[d.season]||(s[d.season]={}),s[d.season][d.division]=d.winner});const r=o==="all"?Array.from(M):[o],a=document.createElement("div");a.className="winners-table-container";const c=document.createElement("table");c.className="division-winner-table";const v=c.createTHead().insertRow();v.innerHTML="<th>Season</th>",r.forEach(d=>v.innerHTML+=`<th>${d}</th>`);const T=c.createTBody();Object.keys(s).sort((d,C)=>C.localeCompare(d)).forEach(d=>{const C=T.insertRow();C.insertCell().textContent=d,r.forEach(S=>{C.insertCell().textContent=s[d][S]||""})}),a.appendChild(c),l.appendChild(a)},K=(e,t)=>{l.innerHTML="";const o=document.createElement("h2");o.className="competition-heading",o.textContent=t,l.appendChild(o);const i=document.createElement("div");i.className="winners-table-container";const n=document.createElement("table");n.className="winners-table";const s=n.createTHead();s.innerHTML="<tr><th>Season</th><th>Winner</th></tr>";const r=n.createTBody();e.forEach(a=>{const c=r.insertRow(),h=a.winner||"N/A";c.innerHTML=`<td>${a.season}</td><td>${h}</td>`}),i.appendChild(n),l.appendChild(i)},P=e=>{if(e.size===0){p.innerHTML="<p>No winners to calculate stats for.</p>";return}const t=[...e.entries()].sort((n,s)=>s[1]-n[1]),o=t.length>0?t[0][1]:0,i=t.filter(n=>n[1]===o);p.innerHTML=`
        <div class="stat-item"><strong>Total Unique Winners:</strong><span>${e.size}</span></div>
        <div class="stat-item"><strong>Most Wins:</strong><span>${i.map(n=>`${n[0]} (${n[1]})`).join(", ")}</span></div>`},Y=e=>{if(f.innerHTML="",e.size===0)return;const t=document.createElement("h2");t.textContent="All Winners by Wins",f.appendChild(t);const o=[...e.entries()].reduce((i,[n,s])=>((i[s]=i[s]||[]).push(n),i),{});Object.keys(o).sort((i,n)=>n-i).forEach(i=>{const n=document.createElement("div");n.className="winner-group";const s=document.createElement("h3");s.textContent=`${i} ${i>1?"Wins":"Win"}`,n.appendChild(s);const r=document.createElement("ul");r.className="detailed-winner-list",o[i].sort().forEach(a=>{const c=document.createElement("li");c.textContent=a,r.appendChild(c)}),n.appendChild(r),f.appendChild(n)})};function Q(e){return e.reduce((t,o)=>{const i=o.winner;return i&&typeof i=="string"&&t.set(i,(t.get(i)||0)+1),t},new Map)}document.addEventListener("DOMContentLoaded",j);
