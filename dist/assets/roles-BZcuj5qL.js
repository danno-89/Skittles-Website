import"./modulepreload-polyfill-B5Qt9EMX.js";import"./firebase.config-IpTQKhZm.js";import"./main-CA5my9sR.js";import{getFunctions as i,httpsCallable as m}from"https://www.gstatic.com/firebasejs/10.9.0/firebase-functions.js";import"https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";const c=document.getElementById("main-content"),s=document.getElementById("auth-check"),d=document.getElementById("role-form"),r=document.getElementById("email-input"),n=document.getElementById("result-message"),a=document.getElementById("loading-spinner");document.addEventListener("authReady",async({detail:o})=>{const e=o.user;if(!e){s.textContent="Error: You must be logged in to access this page.";return}(await e.getIdTokenResult()).claims.committee?(s.style.display="none",c.style.display="block"):s.innerHTML=`
            <h2>Permission Denied</h2>
            <p>You do not have the necessary permissions to access this page.</p>
            <p>If you are a committee member, please contact an administrator to have your role granted.</p>
        `});d.addEventListener("submit",async o=>{o.preventDefault();const e=r.value;if(e){a.style.display="block",n.textContent="";try{const t=i(),l=await m(t,"grantCommitteeRole")({email:e});n.textContent=l.data.message,n.style.color="green"}catch(t){console.error("Error calling grantCommitteeRole function:",t),n.textContent=`Error: ${t.message}`,n.style.color="red"}finally{a.style.display="none",r.value=""}}});
