import"./modulepreload-polyfill-B5Qt9EMX.js";import{b as h,e as y,c as H,g as $,d as x}from"./firebase.config-IpTQKhZm.js";/* empty css                          *//* empty css                  *//* empty css             */import"./main-DLzLBIiP.js";import{collection as b,getDocs as D}from"https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";const d=document.getElementById("countdown"),u=document.getElementById("countdown-card");let f=null;const S=t=>{const n=t.getDate(),i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],o=t.getFullYear();return`${n} ${i} ${o}`},W=t=>t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});async function N(t){if(!t)return{nextCompetition:null,nextCompetitionDate:null};const n=b(h,"events"),e=await D(n);let i=null,o=null;const r=new Date;return e.forEach(s=>{if(s.id.includes(t.toLowerCase())&&s.id.includes("pairs")){const c=s.data();let a;c.date&&typeof c.date.toDate=="function"?a=c.date.toDate():c.date&&(a=new Date(c.date)),a&&a>r&&(!o||a<o)&&(o=a,i=c)}}),{nextCompetition:i,nextCompetitionDate:o}}function B(t,n){f&&clearInterval(f);const e=u.querySelector("h3");e&&e.remove();const i=u.querySelector(".competition-date-time");if(i&&i.remove(),!n||!t){d&&(d.innerHTML="<p>No upcoming competition scheduled.</p>");return}const o=document.createElement("h3");o.textContent=t.name,u.insertBefore(o,d);const r=document.createElement("p");r.className="competition-date-time",r.textContent=`${S(n)} at ${W(n)}`,u.insertBefore(r,d),f=setInterval(()=>{const s=new Date().getTime(),c=n-s;if(c<0){clearInterval(f),d.innerHTML="<p>The competition has started!</p>";return}const a=Math.floor(c/(1e3*60*60*24)),E=Math.floor(c%(1e3*60*60*24)/(1e3*60*60)),M=Math.floor(c%(1e3*60*60)/(1e3*60)),v=Math.floor(c%(1e3*60)/1e3);d.innerHTML=`
            <div>${a}<span>Days</span></div>
            <div>${E}<span>Hours</span></div>
            <div>${M}<span>Minutes</span></div>
            <div>${v}<span>Seconds</span></div>
        `},1e3)}async function I(t){const{nextCompetition:n,nextCompetitionDate:e}=await N(t);B(n,e)}const l=document.getElementById("hall-of-fame-container"),g=document.getElementById("competition-tabs-container"),m=document.getElementById("stats-content"),p=document.getElementById("detailed-winners-container"),T=document.getElementById("division-filter-container");document.getElementById("division-filter");let C=[],w=[];const A=async()=>{try{const t=await y(H(h,"competitions"));if(t.empty){l.innerHTML="<p>No competition data found.</p>";return}C=t.docs.map(n=>({id:n.id,...n.data()})),j()}catch(t){console.error("Error initializing page:",t),l.innerHTML="<p>Error loading competition data.</p>"}},j=()=>{g.innerHTML="";const t=C.filter(n=>n.type==="Pairs").sort((n,e)=>n.name.localeCompare(e.name));if(t.length===0){l.innerHTML="<p>No pairs competitions found.</p>",m.innerHTML="",p.innerHTML="",T.style.display="none";return}t.forEach(n=>{const e=document.createElement("button");e.className="tab-link",e.dataset.competitionId=n.id,e.textContent=n.name,e.addEventListener("click",()=>L(n.id,n.name)),g.appendChild(e)}),t.length>0&&L(t[0].id,t[0].name)},L=(t,n)=>{g.querySelectorAll(".tab-link").forEach(i=>{i.classList.toggle("active",i.dataset.competitionId===t)});let e="";n.toLowerCase().includes("men")?e="men":n.toLowerCase().includes("ladies")?e="ladies":n.toLowerCase().includes("mixed")?e="mixed":n.toLowerCase().includes("open")&&(e="open"),I(e),k(t)},k=async t=>{if(l.innerHTML="<p>Loading...</p>",m.innerHTML="<p>Loading statistics...</p>",p.innerHTML="",T.style.display="none",!t){l.innerHTML="",m.innerHTML="<p>Select a competition to see statistics.</p>";return}try{const n=await $(x(h,"winners",t));w=n.exists()?Object.values(n.data()).find(Array.isArray)||[]:[],w.sort((r,s)=>String(s.season).localeCompare(String(r.season)));const e=C.find(r=>r.id===t),i=e?e.name:"Competition";q(w,i);const o=F(w);z(o),O(o)}catch(n){console.error(`Error loading winners for ${t}:`,n),l.innerHTML="<p>Error loading winners data.</p>",m.innerHTML="<p>Error generating statistics.</p>"}},q=(t,n)=>{l.innerHTML="";const e=document.createElement("h2");e.className="competition-heading",e.textContent=n,l.appendChild(e);const i=document.createElement("table");i.className="winners-table";const o=i.createTHead();o.innerHTML="<tr><th>Season</th><th>Winner</th></tr>";const r=i.createTBody();t.forEach(s=>{const c=r.insertRow();let a;typeof s.winner=="object"&&s.winner!==null?s.winner.male&&s.winner.female?a=`${s.winner.female} & ${s.winner.male}`:s.winner.player1&&s.winner.player2?a=`${s.winner.player1} & ${s.winner.player2}`:a="N/A":a=s.winner||"N/A",c.innerHTML=`<td>${s.season}</td><td>${a}</td>`}),l.appendChild(i)},z=t=>{if(t.size===0){m.innerHTML="<p>No winners to calculate stats for.</p>";return}const n=[...t.entries()].sort((o,r)=>r[1]-o[1]),e=n.length>0?n[0][1]:0,i=n.filter(o=>o[1]===e);m.innerHTML=`
        <div class="stat-item"><strong>Total Unique Winners:</strong><span>${t.size}</span></div>
        <div class="stat-item"><strong>Most Wins:</strong><span>${i.map(o=>`${o[0]} (${o[1]})`).join(", ")}</span></div>`},O=t=>{if(p.innerHTML="",t.size===0)return;const n=document.createElement("h2");n.textContent="All Winners by Wins",p.appendChild(n);const e=[...t.entries()].reduce((i,[o,r])=>((i[r]=i[r]||[]).push(o),i),{});Object.keys(e).sort((i,o)=>o-i).forEach(i=>{const o=document.createElement("div");o.className="winner-group";const r=document.createElement("h3");r.textContent=`${i} ${i>1?"Wins":"Win"}`,o.appendChild(r);const s=document.createElement("ul");s.className="detailed-winner-list",e[i].sort().forEach(c=>{const a=document.createElement("li");a.textContent=c,s.appendChild(a)}),o.appendChild(s),p.appendChild(o)})};function F(t){return t.reduce((n,e)=>{const i=o=>{o&&typeof o=="string"&&n.set(o,(n.get(o)||0)+1)};return typeof e.winner=="string"&&e.winner?i(e.winner):typeof e.winner=="object"&&e.winner!==null&&(e.winner.male&&i(e.winner.male),e.winner.female&&i(e.winner.female),e.winner.player1&&i(e.winner.player1),e.winner.player2&&i(e.winner.player2)),n},new Map)}document.addEventListener("DOMContentLoaded",A);
